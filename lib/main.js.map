{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "AAEA;EAAA;AAAA,MAAA,GAAA,EAAA,eAAA,EAAA,0BAAA,EAAA,sBAAA,EAAA,0BAAA,EAAA,eAAA,EAAA,WAAA,EAAA,mBAAA,EAAA,sBAAA,EAAA,sBAAA,EAAA,SAAA,EAAA,KAAA,EAAA,CAAA,EAAA,GAAA,EAAA,QAAA,EAAA,GAAA,EAAA,KAAA,EAAA,QAAA;IAAA,2DAAA;;;EAGA,GAAA,GAA4B,OAAA,CAAQ,WAAR;;EAC5B,CAAA,CAAE,GAAF,EACE,KADF,CAAA,GAC4B,OAD5B;;EAEA,GAAA,GAA4B,QAAA,CAAE,CAAF,CAAA;WAAS,CAAE,OAAA,CAAQ,OAAR,CAAF,CAAmB,CAAC,OAApB,CAA4B,CAA5B;EAAT;;EAC5B,CAAA;IAAE,OAAA,EAAS;EAAX,CAAA,GAA4B,OAAA,CAAQ,cAAR,CAA5B,EAPA;;;EAWA,KAAA,GAGE,CAAA;;IAAA,QAAA,EAAU,QAAA,CAAE,QAAF,EAAY,CAAZ,CAAA;MACR,IAAY,IAAC,CAAA,GAAG,CAAE,QAAF,CAAJ,CAAiB,CAAjB,CAAZ;AAAA,eAAO,EAAP;;MACA,MAAM,IAAI,0BAAJ,CAA+B,WAA/B,EAA4C,QAA5C,EAAsD,CAAtD;IAFE,CAAV;;IAKA,GAAA,EAGE,CAAA;;;MAAA,QAAA,EAAU,QAAA,CAAE,CAAF,CAAA;eAAS,CAAE,MAAM,CAAA,SAAE,CAAA,QAAQ,CAAC,IAAjB,CAAsB,CAAtB,CAAF,CAAA,KAA+B;MAAxC,CAAV;MACA,GAAA,EAAU,QAAA,CAAE,CAAF,CAAA;AAAQ,YAAA;eAAC,WAAA,aAAO,CAAC,CAAC,iBAAiB,UAAnB,SAA2B;MAA3C,CADV;MAEA,IAAA,EAAU,QAAA,CAAE,CAAF,CAAA;eAAS,CAAE,OAAO,CAAT,CAAA,KAAgB;MAAzB,CAFV;MAGA,KAAA,EAAU,QAAA,CAAE,CAAF,CAAA;QACR,KAAoB,IAAC,CAAA,IAAD,CAAM,CAAN,CAApB;AAAA,iBAAO,MAAP;;AACA,eAAO,kCAAkC,CAAC,IAAnC,CAAwC,CAAxC;MAFC;IAHV;EARF,EAdF;;;EA+BM,kBAAN,MAAA,gBAAA,QAA8B,MAA9B;IACE,WAAa,CAAE,GAAF,EAAO,OAAP,CAAA;WACX,CAAA;MACA,IAAG,GAAA,KAAO,IAAV;QACE,IAAC,CAAA,OAAD,GAAY;AACZ,eAAO,OAFT;;MAGA,IAAC,CAAA,OAAD,GAAY,CAAA,CAAA,CAAG,GAAH,CAAA,EAAA,CAAA,CAAW,IAAC,CAAA,WAAW,CAAC,IAAxB,CAAA,EAAA,CAAA,CAAiC,OAAjC,CAAA;MACZ,IAAC,CAAA,GAAD,GAAY;AACZ,aAAO;IAPI;;EADf,EA/BA;;;EA0CM,yBAAN,MAAA,uBAAA,QAAqC,gBAArC;IACE,WAAa,CAAE,GAAF,EAAO,IAAP,EAAa,OAAb,CAAA;WAA0B,CAAM,GAAN,oBAAW,UAAU,CAAA,0BAAA,CAAA,CAA6B,GAAA,CAAI,IAAJ,CAA7B,CAAA,CAArB;IAA1B;;EADf,EA1CA;;;EA8CM,6BAAN,MAAA,2BAAA,QAAyC,uBAAzC;IACE,WAAa,CAAE,GAAF,EAAO,IAAP,EAAa,KAAb,CAAA;WACX,CAAM,GAAN,EAAW,IAAX,EAAiB,CAAA,0BAAA,CAAA,CAA6B,GAAA,CAAI,IAAJ,CAA7B,CAAA,mBAAA,CAAA,CAA2D,KAAK,CAAC,KAAjE,CAAA,CAAjB;IADW;;EADf,EA9CA;;;EAmDM,6BAAN,MAAA,2BAAA,QAAyC,gBAAzC;IACE,WAAa,CAAE,GAAF,EAAO,QAAP,EAAiB,CAAjB,CAAA;WACX,CAAM,GAAN,EAAW,CAAA,WAAA,CAAA,CAAc,QAAd,CAAA,KAAA,CAAA,CAA8B,GAAA,CAAI,CAAJ,CAA9B,CAAA,CAAX;IADW;;EADf,EAnDA;;;EAyDA,eAAA,GACE;IAAA,OAAA,EAAY,GAAZ;IACA,SAAA,EAAY,GADZ;IAEA,QAAA,EAAY,CAAE,CAAF,CAFZ;IAGA,QAAA,EAAY,CAAE,GAAF,EAAO,EAAP,CAHZ;IAIA,QAAA,EAAY,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,GAAtB,EAA2B,GAA3B,EAAgC,GAAhC,EAAqC,GAArC,EAA0C,GAA1C,EAA+C,GAA/C,CAJZ;IAKA,OAAA,EAAY,GALZ;IAMA,KAAA,EAAY,GANZ;IAOA,GAAA,EAAY;EAPZ,EA1DF;;;EAoEA,sBAAA,GAAyB,QAAA,CAAE,KAAF,CAAA;IACvB,KAAK,CAAC,QAAN,CAAe,OAAf,EAAwB,KAAxB;AACA,WAAO,OAAA,CAAQ,CAAA,iBAAA,CAAA,CAAoB,KAApB,CAAA,CAAR;EAFgB,EApEzB;;;EAyEA,mBAAA,GAAsB,QAAA,CAAE,IAAF,CAAA;IACpB,IAAuC,KAAK,CAAC,GAAG,CAAC,IAAV,CAAe,IAAf,CAAvC;AAAA,aAAO,sBAAA,CAAwB,IAAxB,EAAP;;IACA,IAAuC,KAAK,CAAC,GAAG,CAAC,GAAV,CAAe,IAAf,CAAvC;AAAA,aAA+B,KAA/B;;IACA,MAAM,IAAI,0BAAJ,CAA+B,WAA/B,EAA4C,gBAA5C,EAA8D,IAA9D;EAHc,EAzEtB;;;EA+EA,sBAAA,GAAyB,QAAA,CAAA,GAAE,KAAF,CAAA;AACzB,QAAA;AAAE,WAAO,MAAM,CAAC,MAAP,CAAc,CAAA,CAAd,EAAkB,eAAlB,EAAmC,GAAA;;AAAE;MAAA,KAAA,uCAAA;;qBAAE,mBAAA,CAAoB,IAApB;MAAF,CAAA;;QAAF,CAAnC;EADgB,EA/EzB;;;EAmFA,WAAA,GAAc,sCAnFd;;;EA2FA,SAAA,GAAY,QAAA,CAAE,IAAF,EAAQ,OAAR,CAAA;AACZ,QAAA;AAAE,YAAO,OAAO,CAAC,KAAf;;AAAA,WAEO,GAFP;AAGI,eAAM,CAAE,IAAI,CAAC,QAAL,CAAc,OAAO,CAAC,IAAtB,CAAF,CAAA,IAAmC,CAAE,QAAA,CAAS,IAAT,CAAF,CAAA,GAAoB,OAAO,CAAC,KAArE;UACE,IAAA,GAAO,IAAI;QADb;AADG;;AAFP,WAMO,GANP;AAOI,eAAM,CAAE,IAAI,CAAC,UAAL,CAAgB,OAAO,CAAC,IAAxB,CAAF,CAAA,IAAqC,CAAE,QAAA,CAAS,IAAT,CAAF,CAAA,GAAoB,OAAO,CAAC,KAAvE;UACE,IAAA,GAAO,IAAI;QADb;AADG;;AANP,WAUO,GAVP;QAWI,CAAA,GAAI;AACJ,eAAA,IAAA;UACE,MAAa,CAAE,QAAA,CAAS,IAAT,CAAF,CAAA,GAAoB,OAAO,CAAC,MAAzC;AAAA,kBAAA;;UACA,CAAA;UACA,IAAG,QAAE,GAAK,EAAP,CAAA,KAAc,CAAjB;YACE,IAAG,IAAI,CAAC,UAAL,CAAgB,OAAO,CAAC,IAAxB,CAAH;cAA2C,IAAA,GAAO,IAAI,UAAtD;aAAA,MACK,IAAG,IAAI,CAAC,QAAL,CAAc,OAAO,CAAC,IAAtB,CAAH;cAAsC,IAAA,GAAO,IAAI,2BAAjD;aAFP;WAAA,MAAA;YAIE,IAAG,IAAI,CAAC,QAAL,CAAc,OAAO,CAAC,IAAtB,CAAH;cAA2C,IAAA,GAAO,IAAI,2BAAtD;aAAA,MACK,IAAG,IAAI,CAAC,UAAL,CAAgB,OAAO,CAAC,IAAxB,CAAH;cAAsC,IAAA,GAAO,IAAI,UAAjD;aALP;;QAHF;AAFG;;AAVP,WAsBO,GAtBP;QAuBI;AAvBJ,KAAF;;AAyBE,WAAO;EA1BG,EA3FZ;;;EAwHA,QAAA,GAAW,QAAA,CAAA,GAAE,KAAF,CAAA;AACX,QAAA,SAAA,EAAA;IAAE,UAAA,GAAc,sBAAA,CAAuB,GAAA,KAAvB;IACd,SAAA,GAAc,CAAE,GAAG,CAAC,YAAJ,CAAiB,UAAjB,CAAF,CAA+B,CAAC;AAC9C,WAAO,QAAA,CAAE,KAAF,EAAA,GAAS,WAAT,CAAA;AACT,UAAA,CAAA,EAAA,KAAA,EAAA,OAAA,EAAA,QAAA,EAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,KAAA,EAAA,IAAA,EAAA,IAAA,EAAA;MAAI,CAAA,GAAI,KAAK,CAAE,CAAF;MACT,KAAA,yDAAA;;QACE,IAAA,GAAU,KAAK,CAAE,GAAA,GAAM,CAAR,EAArB;;QAEM,IAAG,IAAI,CAAC,UAAL,CAAgB,GAAhB,CAAH;UACE,IAAO,yCAAP;YACE,MAAM,IAAI,sBAAJ,CAA2B,WAA3B,EAAwC,IAAxC,EADR;;UAEA,CAAA,CAAE,QAAF,EAAY,IAAZ,CAAA,GAAsB,KAAK,CAAC,MAA5B;AACA;YAAI,OAAA,GAAY,CAAE,SAAA,CAAU,QAAV,CAAF,CAAA,CAAuB,KAAvB,EAAhB;WAA+C,cAAA;YAAM;YACnD,MAAM,IAAI,0BAAJ,CAA+B,WAA/B,EAA4C,QAA5C,EAAsD,KAAtD,EADuC;;UAE/C,IAAG,uDAAH;YACE,OAAA,GAAU,SAAA,CAAU,OAAV,EAAmB,OAAnB,EADZ;;UAEA,CAAA,IAAK,OAAA,GAAU,KARjB;SAAA,MAAA;;UAWE,OAAA,GAAa,CAAE,OAAO,KAAP,KAAgB,QAAlB,CAAH,GAAqC,KAArC,GAAgD,GAAA,CAAI,KAAJ;UAC1D,CAAA,IAAU,OAAA,GAAU,KAZtB;;MAHF;AAgBA,aAAO;IAlBF;EAHE,EAxHX;;;;EAiJA,CAAA,GAAI,QAAA,CAAS,OAAT,EAjJJ;;;EAsJA,MAAM,CAAC,OAAP,GAAiB;IACf,CADe;IAEf,QAFe;IAGf,UAAA,EAAY,GAHG;IAIf,eAJe;IAKf,mBALe;IAMf,sBANe;IAOf,WAPe;IAQf,sBARe;IASf,eATe;IAUf,sBAVe;IAWf;EAXe;AAtJjB",
  "sourcesContent": [
    "\n\n'use strict'\n\n#===========================================================================================================\nD3F                       = require 'd3-format'\n{ log\n  debug }                 = console\nrpr                       = ( x ) -> ( require 'loupe' ).inspect x\n{ default: width_of, }    = require 'string-width'\n\n\n#===========================================================================================================\ntypes =\n\n  #---------------------------------------------------------------------------------------------------------\n  validate: ( typename, x ) ->\n    return x if @isa[ typename ] x\n    throw new Effstring_validation_error 'Ωfstr___1', typename, x\n\n  #---------------------------------------------------------------------------------------------------------\n  isa:\n    # list:               ( x ) -> Array.isArray  x\n    # object:             ( x ) -> x? and x instanceof Object\n    function: ( x ) -> ( Object::toString.call x ) is '[object Function]'\n    pod:      ( x ) -> x? and x.constructor in [ Object, undefined, ]\n    text:     ( x ) -> ( typeof x ) is 'string'\n    bcp47:    ( x ) ->\n      return false unless @text x\n      return /^[a-z]{2}-(?:[0-9]{3}|[A-Z]{2})$/.test x\n\n\n#===========================================================================================================\nclass Effstring_error extends Error\n  constructor: ( ref, message ) ->\n    super()\n    if ref is null\n      @message  = message\n      return undefined\n    @message  = \"#{ref} (#{@constructor.name}) #{message}\"\n    @ref      = ref\n    return undefined\n\n#-----------------------------------------------------------------------------------------------------------\nclass Effstring_syntax_error extends Effstring_error\n  constructor: ( ref, part, message ) -> super ref, message ? \"illegal format expression #{rpr part}\"\n\n#-----------------------------------------------------------------------------------------------------------\nclass Effstring_lib_syntax_error extends Effstring_syntax_error\n  constructor: ( ref, part, error ) ->\n    super ref, part, \"illegal format expression #{rpr part};\\norginal error:\\n#{error.stack}\"\n\n#-----------------------------------------------------------------------------------------------------------\nclass Effstring_validation_error extends Effstring_error\n  constructor: ( ref, typename, x ) ->\n    super ref, \"expected a #{typename} got #{rpr x}\"\n\n\n#===========================================================================================================\n_default_locale =\n  decimal:    '.'\n  thousands:  ','\n  grouping:   [ 3, ]\n  currency:   [ '$', '', ]\n  numerals:   [ '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ]\n  percent:    '%'\n  minus:      '−' # U+2212\n  nan:        'NaN'\n\n#===========================================================================================================\n_locale_cfg_from_bcp47 = ( bcp47 ) ->\n  types.validate 'bcp47', bcp47\n  return require \"d3-format/locale/#{bcp47}\"\n\n#---------------------------------------------------------------------------------------------------------\n_hint_as_locale_cfg = ( hint ) ->\n  return _locale_cfg_from_bcp47  hint if types.isa.text hint\n  return                         hint if types.isa.pod  hint\n  throw new Effstring_validation_error 'Ωfstr___2', \"text or object\", hint\n\n#---------------------------------------------------------------------------------------------------------\n_locale_cfg_from_hints = ( hints... ) ->\n  return Object.assign {}, _default_locale, ( ( _hint_as_locale_cfg hint ) for hint in hints )...\n\n#===========================================================================================================\n_fmtspec_re = ///\n  ^:\n  (?<fmt_spec>;?[^;]+);\n  (?<tail>.*)\n  $\n  ///\n\n#-----------------------------------------------------------------------------------------------------------\n_to_width = ( text, fmt_cfg ) ->\n  switch fmt_cfg.align\n    #.......................................................................................................\n    when '<'\n      while ( text.endsWith fmt_cfg.fill ) and ( width_of text ) > fmt_cfg.width\n        text = text[ ... text.length - 1 ]\n    #.......................................................................................................\n    when '>'\n      while ( text.startsWith fmt_cfg.fill ) and ( width_of text ) > fmt_cfg.width\n        text = text[ 1 ... ]\n    #.......................................................................................................\n    when '^'\n      p = 0\n      loop\n        break unless ( width_of text ) > fmt_cfg.width\n        p++\n        if ( p %% 2 ) is 0\n          if text.startsWith fmt_cfg.fill       then text = text[ 1 ... ]\n          else if text.endsWith fmt_cfg.fill    then text = text[ ... text.length - 1 ]\n        else\n          if text.endsWith fmt_cfg.fill         then text = text[ ... text.length - 1 ]\n          else if text.startsWith fmt_cfg.fill  then text = text[ 1 ... ]\n    #.......................................................................................................\n    when '='\n      null\n  #.........................................................................................................\n  return text\n\n#-----------------------------------------------------------------------------------------------------------\nnew_ftag = ( hints... ) ->\n  locale_cfg  = _locale_cfg_from_hints hints...\n  format_fn   = ( D3F.formatLocale locale_cfg ).format\n  return ( parts, expressions... ) ->\n    R = parts[ 0 ]\n    for value, idx in expressions\n      part    = parts[ idx + 1 ]\n      #.....................................................................................................\n      if part.startsWith ':'\n        unless ( match = part.match _fmtspec_re )?\n          throw new Effstring_syntax_error 'Ωfstr___3', part\n        { fmt_spec, tail, } = match.groups\n        try literal = ( ( format_fn fmt_spec ) value ) catch error\n          throw new Effstring_lib_syntax_error 'Ωfstr___4', fmt_spec, error\n        if ( fmt_cfg = D3F.formatSpecifier fmt_spec ).width?\n          literal = _to_width literal, fmt_cfg\n        R += literal + tail\n      #.....................................................................................................\n      else\n        literal = if ( typeof value is 'string' ) then value else rpr value\n        R      += literal + part\n    return R\n\n#-----------------------------------------------------------------------------------------------------------\n# f = new_ftag D3F.format\nf = new_ftag 'en-US'\n\n\n\n#===========================================================================================================\nmodule.exports = {\n  f,\n  new_ftag,\n  _d3_format: D3F,\n  _default_locale,\n  _hint_as_locale_cfg,\n  _locale_cfg_from_bcp47\n  _fmtspec_re,\n  _locale_cfg_from_hints,\n  Effstring_error,\n  Effstring_syntax_error,\n  Effstring_lib_syntax_error, }\n\n\n"
  ]
}