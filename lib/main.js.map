{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n#===========================================================================================================\nD3F                       = require 'd3-format'\n{ log }                   = console\nrpr                       = ( x ) -> ( require 'util' ).inspect x\n\n\n#===========================================================================================================\ntypes =\n\n  #---------------------------------------------------------------------------------------------------------\n  validate: ( typename, x ) ->\n    return x if @isa[ typename ] x\n    throw new Effstring_validation_error '立fstr___1', typename, x\n\n  #---------------------------------------------------------------------------------------------------------\n  isa:\n    # list:               ( x ) -> Array.isArray  x\n    # object:             ( x ) -> x? and x instanceof Object\n    function: ( x ) -> ( Object::toString.call x ) is '[object Function]'\n    pod:      ( x ) -> x? and x.constructor in [ Object, undefined, ]\n    text:     ( x ) -> ( typeof x ) is 'string'\n    bcp47:    ( x ) ->\n      return false unless @text x\n      return /^[a-z]{2}-(?:[0-9]{3}|[A-Z]{2})$/.test x\n\n\n#===========================================================================================================\nclass Effstring_error extends Error\n  constructor: ( ref, message ) ->\n    super()\n    if ref is null\n      @message  = message\n      return undefined\n    @message  = \"#{ref} (#{@constructor.name}) #{message}\"\n    @ref      = ref\n    return undefined\n\n#-----------------------------------------------------------------------------------------------------------\nclass Effstring_syntax_error extends Effstring_error\n  constructor: ( ref, part, message ) -> super ref, message ? \"illegal format expression #{rpr part}\"\n\n#-----------------------------------------------------------------------------------------------------------\nclass Effstring_lib_syntax_error extends Effstring_syntax_error\n  constructor: ( ref, part, error ) ->\n    super ref, part, \"illegal format expression #{rpr part};\\norginal error:\\n#{error.stack}\"\n\n#-----------------------------------------------------------------------------------------------------------\nclass Effstring_validation_error extends Effstring_error\n  constructor: ( ref, typename, x ) ->\n    super ref, \"expected a #{typename} got #{rpr x}\"\n\n\n#===========================================================================================================\n_locale_cfg_from_bcp47 = ( bcp47 ) ->\n  types.validate 'bcp47', bcp47\n  return require \"d3-format/locale/#{bcp47}\"\n\n#---------------------------------------------------------------------------------------------------------\nnew_locale = ( cfg_or_bcp47 ) ->\n  switch true\n    when types.isa.text cfg_or_bcp47 then cfg = _locale_cfg_from_bcp47  cfg_or_bcp47\n    when types.isa.pod  cfg_or_bcp47 then cfg =                         cfg_or_bcp47\n    else throw new Effstring_validation_error '立fstr___4', \"text or object\", cfg_or_bcp47\n  return D3F.formatLocale cfg\n\n#===========================================================================================================\n_format_re = ///\n  ^:\n  (?<fmt>;?[^;]+);\n  (?<tail>.*)\n  $\n  ///\n\n#---------------------------------------------------------------------------------------------------------\nnew_formatter = ( hint ) ->\n  format_fn = if ( types.isa.function hint ) then hint else ( new_locale hint ).format\n  return ( parts, expressions... ) ->\n    R = parts[ 0 ]\n    for value, idx in expressions\n      part    = parts[ idx + 1 ]\n      #.....................................................................................................\n      if part.startsWith ':'\n        unless ( match = part.match _format_re )?\n          throw new Effstring_syntax_error '立fstr___2', part\n        { fmt, tail, } = match.groups\n        try R  += ( ( format_fn fmt ) value ) + tail catch error\n          throw new Effstring_lib_syntax_error '立fstr___3', fmt, error\n      #.....................................................................................................\n      else\n        literal = if ( typeof value is 'string' ) then value else rpr value\n        R      += literal + part\n    return R\n\n#---------------------------------------------------------------------------------------------------------\n# f = new_formatter D3F.format\nf = new_formatter 'en-US'\n\n\n\n#===========================================================================================================\nmodule.exports = {\n  f,\n  new_formatter,\n  new_locale,\n  _locale_cfg_from_bcp47\n  _format_re,\n  Effstring_error,\n  Effstring_syntax_error,\n  Effstring_lib_syntax_error, }\n\n\n"
  ]
}